<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="operun.media">

<head>
	<metal:styles fill-slot="style_slot">
		<link rel="stylesheet" type="text/css" href="" tal:attributes="href string:${here/portal_url}/++resource++media.css" />
	</metal:styles>
	<metal:js fill-slot="javascript_head_slot">
		<script type="text/javascript" src="" tal:attributes="src string:${here/portal_url}/++resource++operun.media.elements/flowplayer.min.js"></script>
	</metal:js>
</head>

<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
           tal:define="kssClassesView context/@@kss_field_decorator_view;
                       getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
                       templateId template/getId;
                       text here/getText;">

        <div tal:replace="structure provider:plone.abovecontenttitle" />

        <h1 class="documentFirstHeading"> 
            <metal:field use-macro="python:here.widget('title', mode='view')">
            Title
            </metal:field>
        </h1>

        <div tal:replace="structure provider:plone.belowcontenttitle" />

        <p class="documentDescription">
            <metal:field use-macro="python:here.widget('description', mode='view')">
            Description
            </metal:field>
        </p>

        <div tal:replace="structure provider:plone.abovecontentbody" />
        
        <div class="newsImageContainer"
             tal:define="image here/image_mini|nothing"
             tal:condition="python: image and here.getShowimage()">
            <a href="#"
               tal:attributes="href string:$here_url/image/image_view_fullscreen"
               id="parent-fieldname-image">
               <img tal:replace="structure python: here.tag(scale='mini', css_class='newsImage')" src="" alt="" />
            </a>
            <p class="discreet">
              <metal:field use-macro="python:here.widget('imageCaption', mode='view')">
              Image Caption
              </metal:field>
            </p>
        </div>
        
        <p tal:condition="python: not text and is_editable"
           i18n:translate="no_body_text"
           class="discreet">
            This item does not have any body text, click the edit tab to change it.
        </p>

        <metal:field use-macro="python:here.widget('text', mode='view')">
        	Body text
        </metal:field>
        
        <div class="visualClear" id="clear-space-before-player"><!-- --></div>        
        
        <div id="youtubeplayer" tal:condition="python: view.getPlayer() == 'external'">
        	<object width="425" height="344">
        		<param name="movie" value="http://www.youtube.com/v/ggofuGDoQyg&hl=de&fs=1&" />
        		<param name="allowFullScreen" value="true" />
        		<param name="allowscriptaccess" value="always" />
        		<embed src=""
        	    	   type="application/x-shockwave-flash"
	        	       allowscriptaccess="always"
    	    	       allowfullscreen="true"
        		       width="560"
        		       height="340"
        	    	   tal:attributes="src view/getYouTubeLink"></embed>
        	</object>
        </div>
        
        <div id="mediaplayer" tal:condition="python: view.getPlayer() == 'internal'"
        					  tal:define="image string:$here_url/splash.jpg;
        					  			  test here/image_mini|nothing;
        					  			  video python: here.absolute_url() + '/download';">
			<a href=""
			   style=""
			   id="flowplayer"
			   tal:define="width here/getWidth;
			   			   height python: here.getHeight()+24;"
			   tal:attributes="href video;
			   				   style string: display: block;; width: ${width}px;; height: ${height}px;;">
			</a>
			
			<script tal:define="splashimage python: test and image or '%2B%2Bresource%2B%2Btransparent.png'"
			        tal:content="string: flowplayer('flowplayer', '${here/portal_url}/%2B%2Bresource%2B%2Boperun.media.elements/flowplayer.swf',  {
			        	playlist: [
			        		{
			        			url: '${splashimage}'
			        		},
			        		{
			        			url: '${video}',
			        			autoPlay: false,
			        			autoBuffering: false
			        		}
			        		] });">
			</script>
			
			<a href="" tal:attributes="href video; title here/Title;" i18n:translate="video_download" tal:condition="here/getDownloadlink">Download the File</a>
		</div>
		
        <div metal:use-macro="here/document_relateditems/macros/relatedItems">
            show related items if they exist
        </div>
    
        <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</metal:main>

</body>
</html>

